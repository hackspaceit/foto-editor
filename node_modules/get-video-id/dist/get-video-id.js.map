{"version":3,"file":"get-video-id.js","sources":["../src/youtube.js","../src/vimeo.js","../src/vine.js","../src/videopress.js","../src/microsoftstream.js","../src/tiktok.js","../src/dailymotion.js","../src/utils/get-src.js","../src/index.js"],"sourcesContent":["/**\n * Strip away any remaining parameters following `?` or `/` or '&' for YouTube shortcode strings.\n *\n * @note this function is not meant to work with url strings containing a protocol like https://\n * @param {String} shortcodeString - the parameter string\n * @returns {String}\n */\nfunction stripParameters(shortcodeString) {\n\t// Split parameters or split folder separator\n\tif (shortcodeString.includes('?')) {\n\t\tshortcodeString = shortcodeString.split('?')[0];\n\t}\n\n\tif (shortcodeString.includes('/')) {\n\t\tshortcodeString = shortcodeString.split('/')[0];\n\t}\n\n\tif (shortcodeString.includes('&')) {\n\t\tshortcodeString = shortcodeString.split('&')[0];\n\t}\n\n\treturn shortcodeString;\n}\n\n/**\n * Get the Youtube Video id.\n * @param {string} youtubeStr - the url from which you want to extract the id\n * @returns {string|undefined}\n */\nexport default function youtube(youtubeString) {\n\tlet string_ = youtubeString;\n\n\t// Remove time hash at the end of the string\n\tstring_ = string_.replace(/#t=.*$/, '');\n\n\t// Strip the leading protocol\n\tstring_ = string_.replace(/^https?:\\/\\//, '');\n\n\t// Shortcode\n\tconst shortcode = /youtube:\\/\\/|youtu\\.be\\/|y2u\\.be\\//g;\n\n\tif (shortcode.test(string_)) {\n\t\tconst shortcodeid = string_.split(shortcode)[1];\n\t\treturn stripParameters(shortcodeid);\n\t}\n\n\t// Shorts\n\tconst shortsUrl = /\\/shorts\\//g;\n\tif (shortsUrl.test(string_)) {\n\t\treturn stripParameters(string_.split(shortsUrl)[1]);\n\t}\n\n\t// V= or vi=\n\tconst parameterv = /v=|vi=/g;\n\n\tif (parameterv.test(string_)) {\n\t\tconst array = string_.split(parameterv);\n\t\treturn stripParameters(array[1].split('&')[0]);\n\t}\n\n\t// /v/ or /vi/ or /watch/\n\tconst inlinev = /\\/v\\/|\\/vi\\/|\\/watch\\//g;\n\n\tif (inlinev.test(string_)) {\n\t\tconst inlineid = string_.split(inlinev)[1];\n\t\treturn stripParameters(inlineid);\n\t}\n\n\t// Format an_webp\n\tconst parameterwebp = /\\/an_webp\\//g;\n\n\tif (parameterwebp.test(string_)) {\n\t\tconst webp = string_.split(parameterwebp)[1];\n\t\treturn stripParameters(webp);\n\t}\n\n\t// /e/\n\tconst eformat = /\\/e\\//g;\n\n\tif (eformat.test(string_)) {\n\t\tconst estring = string_.split(eformat)[1];\n\t\treturn stripParameters(estring);\n\t}\n\n\t// Embed\n\tconst embedreg = /\\/embed\\//g;\n\n\tif (embedreg.test(string_)) {\n\t\tconst embedid = string_.split(embedreg)[1];\n\t\treturn stripParameters(embedid);\n\t}\n\n\t// ignore /user/username pattern\n\tconst usernamereg = /\\/user\\/([a-zA-Z\\d]*)$/g;\n\n\tif (usernamereg.test(string_)) {\n\t\treturn undefined;\n\t}\n\n\t// User\n\tconst userreg = /\\/user\\/(?!.*videos)/g;\n\n\tif (userreg.test(string_)) {\n\t\tconst elements = string_.split('/');\n\t\treturn stripParameters(elements.pop());\n\t}\n\n\t// Attribution_link\n\tconst attrreg = /\\/attribution_link\\?.*v%3D([^%&]*)(%26|&|$)/;\n\n\tif (attrreg.test(string_)) {\n\t\treturn stripParameters(string_.match(attrreg)[1]);\n\t}\n\n\t// Live\n\tconst livereg = /\\/live\\//g;\n\n\tif (livereg.test(string_)) {\n\t\tconst liveid = string_.split(livereg)[1];\n\t\treturn stripParameters(liveid);\n\t}\n\n\treturn undefined;\n}\n","/**\n * Get the vimeo id.\n *\n * @param {String} vimeoString the url from which you want to extract the id\n * @returns {String|undefined}\n */\nexport default function vimeo(vimeoString) {\n\tlet string_ = vimeoString;\n\n\tif (string_.includes('#')) {\n\t\t[string_] = string_.split('#');\n\t}\n\n\tif (string_.includes('?') && !string_.includes('clip_id=')) {\n\t\t[string_] = string_.split('?');\n\t}\n\n\tlet id;\n\tlet array;\n\n\tconst event = /https?:\\/\\/vimeo\\.com\\/event\\/(\\d+)$/;\n\n\tconst eventMatches = event.exec(string_);\n\n\tif (eventMatches && eventMatches[1]) {\n\t\treturn eventMatches[1];\n\t}\n\n\tconst primary = /https?:\\/\\/vimeo\\.com\\/(\\d+)/;\n\n\tconst matches = primary.exec(string_);\n\tif (matches && matches[1]) {\n\t\treturn matches[1];\n\t}\n\n\tconst vimeoPipe = [\n\t\t'https?://player.vimeo.com/video/[0-9]+$',\n\t\t'https?://vimeo.com/channels',\n\t\t'groups',\n\t\t'album',\n\t].join('|');\n\n\tconst vimeoRegex = new RegExp(vimeoPipe, 'gim');\n\n\tif (vimeoRegex.test(string_)) {\n\t\tarray = string_.split('/');\n\t\tif (array && array.length > 0) {\n\t\t\tid = array.pop();\n\t\t}\n\t} else if (/clip_id=/gim.test(string_)) {\n\t\tarray = string_.split('clip_id=');\n\t\tif (array && array.length > 0) {\n\t\t\t[id] = array[1].split('&');\n\t\t}\n\t}\n\n\treturn id;\n}\n","/**\n * Get the vine id.\n * @param {string} string_ - the url from which you want to extract the id\n * @returns {string|undefined}\n */\nexport default function vine(string_) {\n\tconst regex = /https:\\/\\/vine\\.co\\/v\\/([a-zA-Z\\d]*)\\/?/;\n\tconst matches = regex.exec(string_);\n\n\tif (matches && matches.length > 1) {\n\t\treturn matches[1];\n\t}\n\n\treturn undefined;\n}\n","/**\n * Get the VideoPress id.\n * @param {string} urlString - the url from which you want to extract the id\n * @returns {string|undefined}\n */\nexport default function videopress(urlString) {\n\tlet idRegex;\n\n\tif (urlString.includes('embed')) {\n\t\tidRegex = /embed\\/(\\w{8})/;\n\t\treturn urlString.match(idRegex)[1];\n\t}\n\n\tidRegex = /\\/v\\/(\\w{8})/;\n\n\tconst matches = urlString.match(idRegex);\n\n\tif (matches && matches.length > 0) {\n\t\treturn matches[1];\n\t}\n\n\treturn undefined;\n}\n","/**\n * Get the Microsoft Stream id.\n * @param {string} urlString - the url from which you want to extract the id\n * @returns {string|undefined}\n */\nexport default function microsoftStream(urlString) {\n\tconst regex = (urlString.includes('embed'))\n\t\t? /https:\\/\\/web\\.microsoftstream\\.com\\/embed\\/video\\/([a-zA-Z\\d-]*)\\/?/\n\t\t: /https:\\/\\/web\\.microsoftstream\\.com\\/video\\/([a-zA-Z\\d-]*)\\/?/;\n\tconst matches = regex.exec(urlString);\n\n\tif (matches && matches.length > 1) {\n\t\treturn matches[1];\n\t}\n\n\treturn undefined;\n}\n","/**\n * Get the tiktok id.\n * @param {string} urlString - the url from which you want to extract the id\n * @returns {string|undefined}\n */\nexport default function tiktok(urlString) {\n\t// Parse basic url and embeds\n\tconst basicReg = /tiktok\\.com(.*)\\/video\\/(\\d+)/gm;\n\tconst basicParsed = basicReg.exec(urlString);\n\tif (basicParsed && basicParsed.length > 2) {\n\t\treturn basicParsed[2];\n\t}\n\n\treturn undefined;\n}\n","/**\n * Get the dailymotion id.\n * @param {string} urlString - the url from which you want to extract the id\n * @returns {string|undefined}\n */\nexport default function dailymotion(urlString) {\n\t// Parse basic url and embeds\n\tconst basicReg = /dailymotion\\.com(.*)(video)\\/([a-zA-Z\\d]+)/gm;\n\tconst basicParsed = basicReg.exec(urlString);\n\tif (basicParsed) {\n\t\treturn basicParsed[3];\n\t}\n\n\t// Parse shortlink\n\tconst shortRegex = /dai\\.ly\\/([a-zA-Z\\d]+)/gm;\n\tconst shortParsed = shortRegex.exec(urlString);\n\tif (shortParsed && shortParsed.length > 1) {\n\t\treturn shortParsed[1];\n\t}\n\n\t// Dynamic link\n\tconst dynamicRegex = /dailymotion\\.com(.*)video=([a-zA-Z\\d]+)/gm;\n\tconst dynamicParsed = dynamicRegex.exec(urlString);\n\tif (dynamicParsed && dynamicParsed.length > 2) {\n\t\treturn dynamicParsed[2];\n\t}\n\n\treturn undefined;\n}\n","\n/**\n * Get the value assigned to a \"src\" attribute in a string, or undefined.\n * @param {String} input\n * @returns {String|undefined}\n */\nexport default function getSrc(input) {\n\tif (typeof input !== 'string') {\n\t\tthrow new TypeError('getSrc expected a string');\n\t}\n\n\tconst srcRegEx = /src=\"(.*?)\"/gm;\n\tconst matches = srcRegEx.exec(input);\n\n\tif (matches && matches.length >= 2) {\n\t\treturn matches[1];\n\t}\n\n\treturn undefined;\n}\n","import youtube from './youtube.js';\nimport vimeo from './vimeo.js';\nimport vine from './vine.js';\nimport videopress from './videopress.js';\nimport microsoftStream from './microsoftstream.js';\nimport tiktok from './tiktok.js';\nimport dailymotion from './dailymotion.js';\nimport getSrc from './utils/get-src.js';\n\n/**\n * Get the id and service from a video url.\n * @param {String} urlString - the url from which you want to extract the id\n * @returns {Object}\n */\nfunction getVideoId(urlString) {\n\tif (typeof urlString !== 'string') {\n\t\tthrow new TypeError('get-video-id expects a string');\n\t}\n\n\tlet string_ = urlString;\n\n\tif (/<iframe/gi.test(string_)) {\n\t\tstring_ = getSrc(string_) || '';\n\t}\n\n\t// Remove surrounding whitespaces or linefeeds\n\tstring_ = string_.trim();\n\n\t// Remove the '-nocookie' flag from youtube urls\n\tstring_ = string_.replace('-nocookie', '');\n\n\t// Remove any leading `www.`\n\tstring_ = string_.replace('/www.', '/');\n\n\tlet metadata = {\n\t\tid: null,\n\t\tservice: null,\n\t};\n\n\t// Try to handle google redirection uri\n\tif (/\\/\\/google/.test(string_)) {\n\t\t// Find the redirection uri\n\t\tconst matches = string_.match(/url=([^&]+)&/);\n\n\t\t// Decode the found uri and replace current url string - continue with final link\n\t\tif (matches) {\n\t\t\t// JavaScript can get encoded URI\n\t\t\tstring_ = decodeURIComponent(matches[1]);\n\t\t}\n\t}\n\n\tif (/youtube|youtu\\.be|y2u\\.be|i.ytimg\\./.test(string_)) {\n\t\tmetadata = {\n\t\t\tid: youtube(string_),\n\t\t\tservice: 'youtube',\n\t\t};\n\t} else if (/vimeo/.test(string_)) {\n\t\tmetadata = {\n\t\t\tid: vimeo(string_),\n\t\t\tservice: 'vimeo',\n\t\t};\n\t} else if (/vine/.test(string_)) {\n\t\tmetadata = {\n\t\t\tid: vine(string_),\n\t\t\tservice: 'vine',\n\t\t};\n\t} else if (/videopress/.test(string_)) {\n\t\tmetadata = {\n\t\t\tid: videopress(string_),\n\t\t\tservice: 'videopress',\n\t\t};\n\t} else if (/microsoftstream/.test(string_)) {\n\t\tmetadata = {\n\t\t\tid: microsoftStream(string_),\n\t\t\tservice: 'microsoftstream',\n\t\t};\n\t} else if (/tiktok\\.com/.test(string_)) {\n\t\tmetadata = {\n\t\t\tid: tiktok(string_),\n\t\t\tservice: 'tiktok',\n\t\t};\n\t} else if (/(dailymotion\\.com|dai\\.ly)/.test(string_)) {\n\t\tmetadata = {\n\t\t\tid: dailymotion(string_),\n\t\t\tservice: 'dailymotion',\n\t\t};\n\t}\n\n\treturn metadata;\n}\n\nexport default getVideoId;\n"],"names":["stripParameters","shortcodeString","includes","split","youtube","youtubeString","string_","replace","shortcode","test","shortcodeid","shortsUrl","parameterv","array","inlinev","inlineid","parameterwebp","webp","eformat","estring","embedreg","embedid","usernamereg","undefined","userreg","elements","pop","attrreg","match","livereg","liveid","vimeo","vimeoString","id","event","eventMatches","exec","primary","matches","vimeoPipe","join","vimeoRegex","RegExp","length","vine","regex","videopress","urlString","idRegex","microsoftStream","tiktok","basicReg","basicParsed","dailymotion","shortRegex","shortParsed","dynamicRegex","dynamicParsed","getSrc","input","TypeError","srcRegEx","getVideoId","trim","metadata","service","decodeURIComponent"],"mappings":"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"}